/* Copyright (c) 2007 Brandon Aaron (http://brandonaaron.net)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) 
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 0.3
 * Requires jQuery Rev 1845+
 */
(function($){$.extend($.fn,{behavior:function(type,fn){if($.isFunction(type)){fn=type;type=undefined;}$.behavior(this.selector,this.context,type,fn);if($.isReady)$.behavior.run($.behavior.behaviors.length-1);return this;},unbehavior:function(type,fn){if(!type&&!fn)$.each($.behavior.behaviors,function(i,b){if(this.selector==b.selector&&this.context==b.context)$.behavior.remove(i);});else if(!fn&&typeof a=="string")$.each($.behavior.behaviors,function(i,b){if(this.selector==b.selector&&this.context==b.context&&type==b[3])$.behavior.remove(i);});else{if($.isFunction(type)){fn=type;type=undefined;}var id=$.behavior.find(this.selector,this.context,type,fn);if(id!=undefined)$.behavior.remove(id);}return this;}});$.behavior=function(selector,context,type,fn){if(!$.behavior.behaviors)$.behavior.behaviors=[];$.behavior.behaviors.push([undefined].concat($.makeArray(arguments)));return $.behavior.behaviors.length-1;};$.extend($.behavior,{run:function(id){if(!$.behavior.behaviors)return;if(id!=undefined)$.behavior._run(id)else
$.each($.behavior.behaviors,function(i){$.behavior._run(i);});},registerMethod:function(){$.each(arguments,function(i,n){var old=$.fn[n];$.fn[n]=function(){var r=old.apply(this,arguments);$.behavior.run();return r;}});},remove:function(id){if(id!=undefined)delete $.behavior.behaviors[id];else
$.behavior.behaviors=[];},find:function(selector,context,type,fn){var id,args=arguments;for(var i=0;i<$.behavior.behaviors.length;i++){var b=$.behavior.behaviors[i],r=true;for(var k=0;k<args.length;k++){if(b[k+1]!=args[k]){r=false;break;}}if(r){id=i;break;}}return id;},_run:function(id){var behavior=$.behavior.behaviors[id];if($.behavior.running||!behavior)return;$.behavior.running=true;var oldEls=$(behavior[0]),newEls,type=behavior[3],fn=behavior[4];behavior[0]=$(behavior[1],behavior[2]);newEls=$(behavior[0]).not(oldEls);if(type!=undefined)newEls.bind(type,fn);else
newEls.each(function(){fn.apply(this,[]);});$.behavior.running=false;}});$.behavior.registerMethod('append','appendTo','prepend','prependTo','after','before','wrap','html');$(function(){$.behavior.run();});var init=$.prototype.init;$.prototype.init=function(a,c){var r=init.apply(this,[a,c]);if(a&&a.selector){r.context=a.context;r.selector=a.selector;}if(typeof a=="string"){r.context=c;r.selector=a;}return r;};})(jQuery);